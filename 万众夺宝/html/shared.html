<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <title>万众夺宝</title>
  <link href="../css/mui.min.css" rel="stylesheet" />
  <link href="../css/iconfont.css" rel="stylesheet" />
  <link href="../css/common.css" rel="stylesheet" />
</head>

<body>
  <header class="header mui-bar mui-bar-nav bar mui-text-center">
    <a class="mui-pull-left mui-action-back"><i class="icon iconfont icon-left"></i></a>
    <a class="title"></a>
    <a class="mui-pull-right"></a>
  </header>

  <script src="../js/mui.min.js"></script>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/app.js"></script>
  <script type="text/javascript" charset="utf-8">
  mui.plusReady(function() {
    var self = plus.webview.currentWebview();
    var data = self.extras;
    var vid  = 'sub_' + data.url;
    
    if (false === data.back) {
      $('header.mui-bar-nav .mui-action-back').hide();
    } else if (data.back) {
      $('header.mui-bar-nav .mui-action-back').append(data.back);
    }
    
    if (data.title) {
      $('header.mui-bar-nav .title').text(data.title);
    }
    
    if (data.more) {
    	$('header.mui-bar-nav .mui-pull-right').append(data.more.content);
    	$('header.mui-bar-nav .mui-pull-right').on('tap', function () {
    		plus.webview.getWebviewById(vid).evalJS(data.more.tap);
    	});
    } else {
      $('header.mui-bar-nav .mui-pull-right').hide();
    }
    
    mui.init({
      subpages: [{
        url  : data.url,
        id   : vid,
        extras : { extras: data },
        styles : {
          top: '45px',
          bottom: '0px'
        },
      }]
    });
  });
  </script>
</body>
</html>